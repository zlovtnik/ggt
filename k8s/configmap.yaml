apiVersion: v1
kind: ConfigMap
metadata:
  name: ggt-config
  labels:
    app: ggt
data:
  config.yaml: |
    # Kafka configuration
    kafka:
      brokers: ["kafka-service:9092"]
      consumer_group: "ggt-transformers"
      session_timeout: 30000
      heartbeat_interval: 3000
      auto_offset_reset: "earliest"

    # Pipeline configuration
    pipelines:
      - name: "user-enrichment"
        input_topics: ["raw.users"]
        output_topic: "enriched.users"
        transforms:
          - type: "field.add"
            config:
              fields:
                processed_at: "{{ now.Format \"2006-01-02T15:04:05Z07:00\" }}"
                source: "ggt-transformer"

    # Metrics configuration
    metrics:
      port: 9095
      buckets:
        transform_duration: [0.001, 0.005, 0.01, 0.05, 0.1, 0.5, 1.0, 2.0, 5.0]

    # Health configuration
    health:
      port: 8085

    # Logging configuration
    logging:
      level: "info"
      format: "json"